"use strict";var XRegExp=function(e){function t(e,t,r){var n;if(r)if(e.__proto__)e.__proto__=p.prototype;else for(n in p.prototype)e[n]=p.prototype[n];return e[d]={captureNames:t},e}function r(e){return m.replace.call(e,/([\s\S])(?=[\s\S]*\1)/g,"")}function n(e,n){if(!p.isRegExp(e))throw new TypeError("Type RegExp expected");var a=m.exec.call(/\/([a-z]*)$/i,String(e))[1],n=n||{};return n.add&&(a=r(a+n.add)),n.remove&&(a=m.replace.call(a,RegExp("["+n.remove+"]+","g"),"")),e=t(RegExp(e.source,a),e[d]&&e[d].captureNames?e[d].captureNames.slice(0):null,n.addProto)}function a(e,t){if(Array.prototype.indexOf)return e.indexOf(t);var r,n=e.length;for(r=0;r<n;++r)if(e[r]===t)return r;return-1}function i(e,t){return k.call(e)==="[object "+t+"]"}function o(e,t,r){return m.test.call(-1<r.indexOf("x")?/^(?:\s+|#.*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,e.slice(t))}function s(e){return e=e||{},i(e,"String")&&(e=p.forEach(e,/[^\s,]+/,function(e){this[e]=!0},{})),e}function l(e){if(!/^[\w$]$/.test(e))throw Error("Flag must be a single character A-Za-z0-9_$");$[e]=!0}function c(e){RegExp.prototype.exec=(e?h:m).exec,RegExp.prototype.test=(e?h:m).test,String.prototype.match=(e?h:m).match,String.prototype.replace=(e?h:m).replace,String.prototype.split=(e?h:m).split,g.natives=e}function u(e){if(null==e)throw new TypeError("Cannot convert null or undefined to object");return e}var p,f,d="xregexp",g={astral:!1,natives:!1},m={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},h={},x={},v={},y=[],b={default:/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,class:/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|[\s\S]/},w=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,E=m.exec.call(/()??/,"")[1]===e,S=RegExp.prototype.sticky!==e,$={g:!0,i:!0,m:!0,y:S},k={}.toString;return p=function(a,i){var o,s,l={hasNamedCapture:!1,captureNames:[]},c="default",u="",f=0;if(p.isRegExp(a)){if(i!==e)throw new TypeError("Cannot supply flags when copying a RegExp");return n(a,{addProto:!0})}if(a=a===e?"":String(a),i=i===e?"":String(i),s=a+"/"+i,!v[s]){o=a;var d,g=i;if(r(g)!==g)throw new SyntaxError("Invalid duplicate regex flag "+g);for(o=m.replace.call(o,/^\(\?([\w$]+)\)/,function(e,t){if(m.test.call(/[gy]/,t))throw new SyntaxError("Cannot use flag g or y in mode modifier "+e);return g=r(g+t),""}),d=0;d<g.length;++d)if(!$[g.charAt(d)])throw new SyntaxError("Unknown regex flag "+g.charAt(d));for(o={pattern:o,flags:g},a=o.pattern,i=o.flags;f<a.length;){do{o=a,d=i;for(var h=f,x=c,w=l,E=y.length,S=null,k=void 0,C=void 0;E--;)if(C=y[E],(C.scope===x||"all"===C.scope)&&(!C.flag||-1<d.indexOf(C.flag))&&(k=p.exec(o,C.regex,h,"sticky"))){S={matchLength:k[0].length,output:C.handler.call(w,k,x,d),reparse:C.reparse};break}(o=S)&&o.reparse&&(a=a.slice(0,f)+o.output+a.slice(f+o.matchLength))}while(o&&o.reparse);o?(u+=o.output,f+=o.matchLength||1):(o=p.exec(a,b[c],f,"sticky")[0],u+=o,f+=o.length,"["===o&&"default"===c?c="class":"]"===o&&"class"===c&&(c="default"))}v[s]={pattern:m.replace.call(u,/\(\?:\)(?=\(\?:\))|^\(\?:\)|\(\?:\)$/g,""),flags:m.replace.call(i,/[^gimy]+/g,""),captures:l.hasNamedCapture?l.captureNames:null}}return s=v[s],t(RegExp(s.pattern,s.flags),s.captures,!0)},p.prototype=RegExp(),p.version="3.0.0-pre",p.addToken=function(e,t,r){var a,r=r||{},i=r.optionalFlags;if(r.flag&&l(r.flag),i)for(i=m.split.call(i,""),a=0;a<i.length;++a)l(i[a]);y.push({regex:n(e,{add:"g"+(S?"y":"")}),handler:t,scope:r.scope||"default",flag:r.flag,reparse:r.reparse}),p.cache.flush("patterns")},p.cache=function(e,t){var r=e+"/"+(t||"");return x[r]||(x[r]=p(e,t))},p.cache.flush=function(e){"patterns"===e?v={}:x={}},p.escape=function(e){return m.replace.call(u(e),/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},p.exec=function(e,t,r,a){var i="g";return S&&(a||t.sticky&&!1!==a)&&(i+="y"),t[d]=t[d]||{captureNames:null},i=t[d][i]||(t[d][i]=n(t,{add:i,remove:!1===a?"y":""})),i.lastIndex=r=r||0,e=h.exec.call(i,e),a&&e&&e.index!==r&&(e=null),t.global&&(t.lastIndex=e?i.lastIndex:0),e},p.forEach=function(e,t,r,n){for(var a=0,i=-1;a=p.exec(e,t,a);)r.call(n,a,++i,e,t),a=a.index+(a[0].length||1);return n},p.globalize=function(e){return n(e,{add:"g",addProto:!0})},p.install=function(e){e=s(e),!g.astral&&e.astral&&(p.cache.flush("patterns"),g.astral=!0),!g.natives&&e.natives&&c(!0)},p.isInstalled=function(e){return!!g[e]},p.isRegExp=function(e){return"[object RegExp]"===k.call(e)},p.match=function(e,t,r){var a=t.global&&"one"!==r||"all"===r,i=(a?"g":"")+(t.sticky?"y":"");return t[d]=t[d]||{captureNames:null},i=t[d][i||"noGY"]||(t[d][i||"noGY"]=n(t,{add:i,remove:"one"===r?"g":""})),e=m.match.call(u(e),i),t.global&&(t.lastIndex="one"===r&&e?e.index+e[0].length:0),a?e||[]:e&&e[0]},p.matchChain=function(e,t){return function e(r,n){var a,i=t[n].regex?t[n]:{regex:t[n]},o=[],s=function(e){if(i.backref){if(!(e.hasOwnProperty(i.backref)||+i.backref<e.length))throw new ReferenceError("Backreference to undefined group: "+i.backref);o.push(e[i.backref]||"")}else o.push(e[0])};for(a=0;a<r.length;++a)p.forEach(r[a],i.regex,s);return n!==t.length-1&&o.length?e(o,n+1):o}([e],0)},p.replace=function(e,t,r,a){var i=p.isRegExp(t),o=t.global&&"one"!==a||"all"===a,s=(o?"g":"")+(t.sticky?"y":""),l=t;return i?(t[d]=t[d]||{captureNames:null},l=t[d][s||"noGY"]||(t[d][s||"noGY"]=n(t,{add:s,remove:"one"===a?"g":""}))):o&&(l=RegExp(p.escape(String(t)),"g")),e=h.replace.call(u(e),l,r),i&&t.global&&(t.lastIndex=0),e},p.replaceEach=function(e,t){var r,n;for(r=0;r<t.length;++r)n=t[r],e=p.replace(e,n[0],n[1],n[2]);return e},p.split=function(e,t,r){return h.split.call(u(e),t,r)},p.test=function(e,t,r,n){return!!p.exec(e,t,r,n)},p.uninstall=function(e){e=s(e),g.astral&&e.astral&&(p.cache.flush("patterns"),g.astral=!1),g.natives&&e.natives&&c(!1)},p.union=function(e,t){var r,n,a,o,s=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,l=[],c=0,u=function(e,t,a){var i=n[c-r];if(t){if(++c,i)return"(?<"+i+">"}else if(a)return"\\"+(+a+r);return e};if(!i(e,"Array")||!e.length)throw new TypeError("Must provide a nonempty array of patterns to merge");for(o=0;o<e.length;++o)a=e[o],p.isRegExp(a)?(r=c,n=a[d]&&a[d].captureNames||[],l.push(m.replace.call(p(a.source).source,s,u))):l.push(p.escape(a));return p(l.join("|"),t)},h.exec=function(t){var r,i,o=this.lastIndex,s=m.exec.apply(this,arguments);if(s){if(!E&&1<s.length&&-1<a(s,"")&&(r=n(this,{remove:"g"}),m.replace.call(String(t).slice(s.index),r,function(){var t,r=arguments.length;for(t=1;t<r-2;++t)arguments[t]===e&&(s[t]=e)})),this[d]&&this[d].captureNames)for(i=1;i<s.length;++i)(r=this[d].captureNames[i-1])&&(s[r]=s[i]);this.global&&!s[0].length&&this.lastIndex>s.index&&(this.lastIndex=s.index)}return this.global||(this.lastIndex=o),s},h.test=function(e){return!!h.exec.call(this,e)},h.match=function(e){var t;if(p.isRegExp(e)){if(e.global)return t=m.match.apply(this,arguments),e.lastIndex=0,t}else e=RegExp(e);return h.exec.call(e,u(this))},h.replace=function(t,r){var n,o,s,l=p.isRegExp(t);return l?(t[d]&&(o=t[d].captureNames),n=t.lastIndex):t+="",s=i(r,"Function")?m.replace.call(String(this),t,function(){var n,a=arguments;if(o)for(a[0]=new String(a[0]),n=0;n<o.length;++n)o[n]&&(a[0][o[n]]=a[n+1]);return l&&t.global&&(t.lastIndex=a[a.length-2]+a[0].length),r.apply(e,a)}):m.replace.call(null==this?this:String(this),t,function(){var e=arguments;return m.replace.call(String(r),w,function(t,r,n){if(r){if((n=+r)<=e.length-3)return e[n]||"";if((n=o?a(o,r):-1)<0)throw new SyntaxError("Backreference to undefined group "+t);return e[n+1]||""}if("$"===n)return"$";if("&"===n||0==+n)return e[0];if("`"===n)return e[e.length-1].slice(0,e[e.length-2]);if("'"===n)return e[e.length-1].slice(e[e.length-2]+e[0].length);if(n=+n,!isNaN(n)){if(n>e.length-3)throw new SyntaxError("Backreference to undefined group "+t);return e[n]||""}throw new SyntaxError("Invalid token "+t)})}),l&&(t.lastIndex=t.global?0:n),s},h.split=function(t,r){if(!p.isRegExp(t))return m.split.apply(this,arguments);var n,a=String(this),i=[],o=t.lastIndex,s=0,r=(r===e?-1:r)>>>0;return p.forEach(a,t,function(e){e.index+e[0].length>s&&(i.push(a.slice(s,e.index)),1<e.length&&e.index<a.length&&Array.prototype.push.apply(i,e.slice(1)),n=e[0].length,s=e.index+n)}),s===a.length?(!m.test.call(t,"")||n)&&i.push(""):i.push(a.slice(s)),t.lastIndex=o,i.length>r?i.slice(0,r):i},f=p.addToken,f(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,function(e,t){if("B"===e[1]&&"default"===t)return e[0];throw new SyntaxError("Invalid escape "+e[0])},{scope:"all"}),f(/\[(\^?)]/,function(e){return e[1]?"[\\s\\S]":"\\b\\B"}),f(/\(\?#[^)]*\)/,function(e,t,r){return o(e.input,e.index+e[0].length,r)?"":"(?:)"}),f(/\s+|#.*/,function(e,t,r){return o(e.input,e.index+e[0].length,r)?"":"(?:)"},{flag:"x"}),f(/\./,function(){return"[\\s\\S]"},{flag:"s"}),f(/\\k<([\w$]+)>/,function(e){var t=isNaN(e[1])?a(this.captureNames,e[1])+1:+e[1],r=e.index+e[0].length;if(!t||t>this.captureNames.length)throw new SyntaxError("Backreference to undefined group "+e[0]);return"\\"+t+(r===e.input.length||isNaN(e.input.charAt(r))?"":"(?:)")}),f(/\\(\d+)/,function(e,t){if(!("default"===t&&/^[1-9]/.test(e[1])&&+e[1]<=this.captureNames.length)&&"0"!==e[1])throw new SyntaxError("Cannot use octal escape or backreference to undefined group "+e[0]);return e[0]},{scope:"all"}),f(/\(\?P?<([\w$]+)>/,function(e){if(!isNaN(e[1]))throw new SyntaxError("Cannot use integer as capture name "+e[0]);if("length"===e[1]||"__proto__"===e[1])throw new SyntaxError("Cannot use reserved word as capture name "+e[0]);if(-1<a(this.captureNames,e[1]))throw new SyntaxError("Cannot use same name for multiple groups "+e[0]);return this.captureNames.push(e[1]),this.hasNamedCapture=!0,"("}),f(/\((?!\?)/,function(e,t,r){return-1<r.indexOf("n")?"(?:":(this.captureNames.push(null),"(")},{optionalFlags:"n"}),p}();!function(e){function t(e){return e.replace(/[- _]+/g,"").toLowerCase()}function r(e){for(;e.length<4;)e="0"+e;return e}function n(e){return parseInt(e,16)}function a(e){return parseInt(e,10).toString(16)}function i(e){var t=/^\\[xu](.+)/.exec(e);return t?n(t[1]):e.charCodeAt("\\"===e.charAt(0)?1:0)}function o(t){var n,o="",s=-1;return e.forEach(t,/(\\x..|\\u....|\\?[\s\S])(?:-(\\x..|\\u....|\\?[\s\S]))?/,function(e){n=i(e[1]),n>s+1&&(o+="\\u"+r(a(s+1)),n>s+2&&(o+="-\\u"+r(a(n-1)))),s=i(e[2]||e[1])}),s<65535&&(o+="\\u"+r(a(s+1)),s<65534&&(o+="-\\uFFFF")),o}function s(e){return u[e]["b!"]||(u[e]["b!"]=o(u[e].bmp))}function l(e,t){var r=u[e],n="";return r.bmp&&!r.isBmpLast&&(n="["+r.bmp+"]"+(r.astral?"|":"")),r.astral&&(n+=r.astral),r.isBmpLast&&r.bmp&&(n+=(r.astral?"|":"")+"["+r.bmp+"]"),t?"(?:(?!"+n+")(?:[�-�][�-�]|[\0-￿]))":"(?:"+n+")"}function c(e,t){var r=t?"a!":"a=";return u[e][r]||(u[e][r]=l(e,t))}var u={};e.addToken(/\\([pP])(?:{(\^?)([^}]*)}|([A-Za-z]))/,function(r,n,a){var i="P"===r[1]||!!r[2],o=a.indexOf("A")>-1||e.isInstalled("astral"),l=t(r[4]||r[3]),p=u[l];if("P"===r[1]&&r[2])throw new SyntaxError("Invalid double negation "+r[0]);if(!u.hasOwnProperty(l))throw new SyntaxError("Unknown Unicode token "+r[0]);if(p.inverseOf){if(l=t(p.inverseOf),!u.hasOwnProperty(l))throw new ReferenceError("Unicode token missing data "+r[0]+" -> "+p.inverseOf);p=u[l],i=!i}if(!p.bmp&&!o)throw new SyntaxError("Astral mode required for Unicode token "+r[0]);if(o){if("class"===n)throw new SyntaxError("Astral mode does not support Unicode tokens within character classes");return c(l,i)}return"class"===n?i?s(l):p.bmp:(i?"[^":"[")+p.bmp+"]"},{scope:"all",optionalFlags:"A"}),e.addUnicodeData=function(r){var n,a;for(a=0;a<r.length;++a){if(n=r[a],!n.name)throw new Error("Unicode token requires name");if(!(n.inverseOf||n.bmp||n.astral))throw new Error("Unicode token has no character data "+n.name);u[t(n.name)]=n,n.alias&&(u[t(n.alias)]=n)}e.cache.flush("patterns")},e.addUnicodeData([{name:"L",alias:"Letter",bmp:"A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",astral:"�[�-���-�����-��-��-��-�����-��-��-��-��-��-��-�]|�[�-�]|�[�-��-��-����-��-��-��-��-��-��-��-��-��-��-�]|�[�-�]|�[�-��-��-��-��-��-�]|�[�-�]|�[�-��-�]|�[�-�]|�[�-�]|�[�-�]|�[�-�]|�[�-���-�]|�[�-��-�]|�[��]|[��-��-�][�-�]|�[�-��-������-��-��������-�������������-��-��-��-���-��-��-��-��-�]|�[�-��-�������-��-���-��-��-��-��-��-��-��-���-��-��-��-��-��-��-��-��-��-��-��-��-�]|�[�-�]"}])}(XRegExp),function(e){var t,r,n;"undefined"==typeof window?(r=require("fs"),n=require("xregexp"),process.profile=function(e,t){console.log("%s took %d milliseconds",e,process.elapsedTimeSince(t))},process.elapsedTimeSince=function(e){var t=process.hrtime(e);return 1e3*t[0]+t[1]/1e6}):n=window.XRegExp,e.exports=t={generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},walk:function(e,n){var a=[];r.readdir(e,function(i,o){if(i)return n(i);var s=o.length;if(!s)return n(null,a);o.forEach(function(i){i=e+"/"+i,r.stat(i,function(e,r){if(e)return n(e);r&&r.isDirectory()?t.walk(i,function(e,t){if(e)return n(e);a=a.concat(t),--s||n(null,a)}):(a.push(i),--s||n(null,a))})})})},invalidUnicodeChars:n("[^\\p{L}\\s\\d\\-_]","g"),invalidLatinChars:/[^\w\s\d\-_]/g,trimRegex:/^\s+|\s+$/g,collapseWhitespace:/\s+/g,collapseDash:/-+/g,trimTrailingDash:/-$/g,trimLeadingDash:/^-/g,isLatin:/^[\w\d\s.,\-@]+$/,languageKeyRegex:/\[\[[\w]+:.+\]\]/,slugify:function(e,r){return e?(e=e.replace(t.trimRegex,""),e=t.isLatin.test(e)?e.replace(t.invalidLatinChars,"-"):n.replace(e,t.invalidUnicodeChars,"-"),e=r?e:e.toLocaleLowerCase(),e=e.replace(t.collapseWhitespace,"-"),e=e.replace(t.collapseDash,"-"),e=e.replace(t.trimTrailingDash,""),e=e.replace(t.trimLeadingDash,"")):""},cleanUpTag:function(e,t){if("string"!=typeof e||!e.length)return"";e=e.trim().toLowerCase(),e=e.replace(/\u202E/gi,""),e=e.replace(/[,\/#!$%\^\*;:{}=_`<>'"~()?\|]/g,""),e=e.substr(0,t||15).trim();var r=e.match(/^[.-]*(.+?)[.-]*$/);return r&&r.length>1&&(e=r[1]),e},removePunctuation:function(e){return e.replace(/[\.,-\/#!$%\^&\*;:{}=\-_`<>'"~()?]/g,"")},isEmailValid:function(e){return"string"==typeof e&&e.length&&-1!==e.indexOf("@")},isUserNameValid:function(e){return e&&""!==e&&/^['"\s\-\+.*0-9\u00BF-\u1FFF\u2C00-\uD7FF\w]+$/.test(e)},isPasswordValid:function(e){return"string"==typeof e&&e.length},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},hasLanguageKey:function(e){return t.languageKeyRegex.test(e)},merge:function(){for(var e,t,r={},n=0;n<arguments.length;n++){e=arguments[n]||{},t=Object.keys(e);for(var a=0;a<t.length;a++)r[t[a]]=e[t[a]]}return r},fileExtension:function(e){return(""+e).split(".").pop()},extensionMimeTypeMap:{bmp:"image/bmp",cmx:"image/x-cmx",cod:"image/cis-cod",gif:"image/gif",ico:"image/x-icon",ief:"image/ief",jfif:"image/pipeg",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",pbm:"image/x-portable-bitmap",pgm:"image/x-portable-graymap",pnm:"image/x-portable-anymap",ppm:"image/x-portable-pixmap",ras:"image/x-cmu-raster",rgb:"image/x-rgb",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",xbm:"image/x-xbitmap",xpm:"image/x-xpixmap",xwd:"image/x-xwindowdump"},fileMimeType:function(e){return t.extensionToMimeType(t.fileExtension(e))},extensionToMimeType:function(e){return t.extensionMimeTypeMap[e]||"*"},isRelativeUrl:function(e){var t=e.slice(0,1);return"."===t||"/"===t},makeNumbersHumanReadable:function(e){e.each(function(){$(this).html(t.makeNumberHumanReadable($(this).attr("title")))})},makeNumberHumanReadable:function(e){var t=parseInt(e,10);return t?t>999999?(t/1e6).toFixed(1)+"m":t>999?(t/1e3).toFixed(1)+"k":t:e},addCommasToNumbers:function(e){e.each(function(e,r){$(r).html(t.addCommas($(r).html()))})},addCommas:function(e){return e.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")},toISOString:function(e){return e&&Date.prototype.toISOString?Date.prototype.toISOString?new Date(parseInt(e,10)).toISOString():e:""},tags:["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","map","mark","menu","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],stripTags:["abbr","acronym","address","applet","area","article","aside","audio","base","basefont","bdi","bdo","big","blink","body","button","canvas","caption","center","cite","code","col","colgroup","command","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","input","ins","kbd","keygen","label","legend","li","link","map","mark","marquee","menu","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","source","span","strike","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],escapeRegexChars:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},escapeHTML:function(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")},isAndroidBrowser:function(){var e=navigator.userAgent;return e.indexOf("Mozilla/5.0")>-1&&e.indexOf("Android ")>-1&&e.indexOf("AppleWebKit")>-1&&!(e.indexOf("Chrome")>-1)},isTouchDevice:function(){return"ontouchstart"in document.documentElement},findBootstrapEnvironment:function(){var e=["xs","sm","md","lg"],t=$("<div>");t.appendTo($("body"));for(var r=e.length-1;r>=0;r--){var n=e[r];if(t.addClass("hidden-"+n),t.is(":hidden"))return t.remove(),n}},isMobile:function(){var e=t.findBootstrapEnvironment();return["xs","sm"].some(function(t){return t===e})},getHoursArray:function(){for(var e=(new Date).getHours(),t=[],r=e,n=e-24;r>n;r--){var a=r<0?24+r:r;t.push(a+":00")}return t.reverse()},getDaysArray:function(e){for(var t,r=new Date(e||Date.now()).getTime(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=[],i=29;i>=0;i--)t=new Date(r-864e5*i),a.push(n[t.getMonth()]+" "+t.getDate());return a},isElementInViewport:function(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},params:function(e){var r,n,a={};return e=e||{},e.skipToType=e.skipToType||{},e.url&&(r=t.urlToLocation(e.url)),n=(r?r.search:window.location.search).substring(1).split("&"),n.forEach(function(r){var n=r.split("="),i=decodeURI(n[0]),o=e.skipToType[i]?decodeURI(n[1]):t.toType(decodeURI(n[1]));i&&("[]"===i.substr(-2,2)&&(i=i.slice(0,-2)),a[i]?($.isArray(a[i])||(a[i]=[a[i]]),a[i].push(o)):a[i]=o)}),a},param:function(e){return this.params()[e]},urlToLocation:function(e){var t=document.createElement("a");return t.href=e,t},toType:function(e){if("string"!=typeof e)return e;var t=parseFloat(e);if(!isNaN(t)&&isFinite(e))return t;if("false"===e)return!1;if("true"===e)return!0;try{e=JSON.parse(e)}catch(e){}return e},props:function(e,r,n){if(void 0===e&&(e=window),null!=r){var a=r.indexOf(".");if(-1==a)return void 0!==n&&(e[r]=n),e[r];var i=r.slice(0,a),o=r.slice(a+1);return void 0===r||e[i]instanceof Object||(e[i]={}),t.props(e[i],o,n)}},isInternalURI:function(e,t,r){return""===e.host||e.host===t.host&&e.protocol===t.protocol&&(!(r.length>0)||0===e.pathname.indexOf(r))}},"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){if(this.length<e.length)return!1;for(var t=e.length-1;t>=0&&this[t]===e[t];--t);return t<0}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(e){if(this.length<e.length)return!1;for(var t=this.length,r=e.length,n=1;n<=r&&this[t-n]===e[r-n];++n);return n>r}),"function"!=typeof String.prototype.rtrim&&(String.prototype.rtrim=function(){return this.replace(/\s+$/g,"")}),"undefined"!=typeof window&&(window.utils=e.exports)}("undefined"==typeof module?{module:{exports:{}}}:module),$("document").ready(function(){function e(e){if($("form .admin [name]").each(function(){t($(this).attr("name"),$(this))}),$("form .admin .error").length)return e.preventDefault(),$("html, body").animate({scrollTop:"0px"},400),!1;$("#submit .fa-spin").removeClass("hide")}function t(e,t){var r=t.val(),n=t.parents(".input-row"),a=n.children(".help-text");switch(e){case"admin:username":return function(e){utils.isUserNameValid(e)&&utils.slugify(e)?n.removeClass("error"):(n.addClass("error"),a.html("Invalid Username."))}(r);case"admin:password":return function(e){utils.isPasswordValid(e)?e.length<$('[name="admin:password"]').attr("data-minimum-length")?(n.addClass("error"),a.html("Password is too short.")):n.removeClass("error"):(n.addClass("error"),a.html("Invalid Password."))}(r);case"admin:passwordConfirm":return function(e){$('[name="admin:password"]').val()!==$('[name="admin:passwordConfirm"]').val()?(n.addClass("error"),a.html("Passwords do not match.")):n.removeClass("error")}(r);case"admin:email":return function(e){utils.isEmailValid(e)?n.removeClass("error"):(n.addClass("error"),a.html("Invalid Email Address."))}(r);case"database":return function(e){$("#database-config").html($('[data-database="'+e+'"]').html())}(r)}}function r(){$("#launch .fa-spin").removeClass("hide"),$.post("/launch",function(){setInterval(function(){$.get("/admin").done(function(e){window.location="admin"})},750)})}!function(){$("form").on("focus",".form-control",function(){var e=$(this).parents(".input-row");$(".input-row.active").removeClass("active"),e.addClass("active").removeClass("error");var t=e.find(".help-text");t.html(t.attr("data-help"))}),$("form").on("blur change","[name]",function(){t($(this).attr("name"),$(this))}),$("form").submit(e)}(),$('[name="username"]').focus(),t("database",$('[name="database"]')),$("#database-error").length&&($('[name="database"]').parents(".input-row").addClass("error"),$("html, body").animate({scrollTop:$("#database-error").offset().top+100+"px"},400)),$("#launch").on("click",r)});